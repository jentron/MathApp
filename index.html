<!DOCTYPE html>
<html lang="en">
  <head>
    <!--   Honor Code: I acknowledge that this code represents my own work:
    Ron Jensen
    Date:  20180528
    Copyright 2018 Ronald Jensen -->
    <meta name="description" content="Simple Math Quiz" />
    <meta name="keywords" content="Math, Test, First, Second, Grade" />
    <meta name="author" content="Ron Jensen" />
    <!-- Required meta tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style/mathapp.css">
    <title>Jensen - Math Is Fun!</title>
    <script type="text/javascript" src="scripts/mathtest.js"></script>
    <script type="text/javascript" src="scripts/stopwatch-2.js"></script>
  </head>
  <body>
    <!-- Optional JavaScript. Bootstrap recomments these in body not head-->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <div class="game_table">
    <header>
      <!--button id="btn-settings" class="btn" type="button" onclick="mySettingsInit();"><i class="fa fa-cog">&nbsp;</i></button-->
      <button type="button" class="btn btn-default no-print" aria-label="Settings" data-toggle="modal" data-target="#settingsModal"><span class="fa fa-cog" aria-hidden="true"></span>
      </button>
      <button type="button" class="btn btn-default no-print" aria-label="Login" data-toggle="modal" data-target="#loginModal"><span class="fa fa-user" aria-hidden="true"></span>
      </button>
    </header>
    <div id="userName"></div> <div id="score"></div> <div id="timer"></div><br>
    <div>
    <div id="gameTitle" class="button_row">Something</div>
    <div class="button_row">
      <button id="btn-add" class="btn" type="button" onclick="myTest.playAdd();"     >+</button>
      <button id="btn-sub" class="btn" type="button" onclick="myTest.playSubtract();">-</button>
      <button id="btn-mul" class="btn" type="button" onclick="myTest.playMultiply();">*</button>
      <button id="btn-div" class="btn" type="button" onclick="myTest.playDivide();"  >/</button>
    </div> 
    <div class="game_td" id="game_operand1"></div>
    <div class="game_td" id="game_operator">+-*/</div>
    <div class="game_td" id="game_operand2"></div>
    <div class="game_td" id="game_equals">=</div>
    <!-- game result is type text because number calls onchange too much -->
    <div class="game_td" id="game_result"><input type="text" id="game_answer" name="game_answer"  class="game_input" onchange="myTest.check();" size="4"/></div>
  </div>
  <div class="alert alert-success" role="alert" id="answerCorrect" hidden>
    <span class="fa fa fa-thumbs-o-up" aria-hidden="true"></span>
    <strong>Correct!</strong> You got it right!
  </div>
  <div class="alert alert-danger" role="alert" id="answerWrong" hidden>
    <span class="fa-stack fa-lg"  aria-hidden="true">
      <i class="fa fa-circle-thin fa-stack-2x"></i>
      <i class="fa fa-exclamation fa-stack-1x"></i>
    </span>
    <strong>Fail!</strong> The answer was: <span id="answerWrongShow">placeholder</span>
  </div>
  </div>
<!-- SETTINGS MODAL -->
   <div class="modal fade no-print" tabindex="-1" role="dialog" id="settingsModal">
      <div class="modal-dialog">
         <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title">Settings</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
           <div class="modal-body">
<ul>
<li>The maximum number size<div>
  <select id="settings_maxValue">
    <option value="9" > 9</option>
    <option value="12">12</option>
    <option value="16"  selected="selected">16</option>
    <option value="99">99</option>
  </select>
</div></li>
<li id="settings_useNegativesDiv"><input type="checkbox" class="btn btn-default" id="use-negatives" >Use Negative Numbers</li>
<!--li>hexadecimal?</li-->

<li>Which game mode to use<div>
  <select id="settings_gameMode">
    <option value="mode_freeplay" selected="selected">Free Mode</option>
    <option value="mode_practice" >Practice Mode</option>
    <option value="mode_minute"   >Minute to Win It Mode</option>
    <option value="mode_twenty">Twenty Questions Mode</option>
  </select>
</div></li>
<!--
<li>Free Mode: User selects which type of question to answer. A timer will run showing elapsed time, open ended.</li>
<li>Practice Mode: Random questions from the selected (currently 4) question types. A timer will run showing elapsed time, open ended.</li>
<li>Minute to Win It Mode: Answer as many questions correctly as possible in 60 seconds (time as a setting)</li>
<li>Twenty Questions Mode: Answer 20 questions correctly as rapidly as possible. (number as a setting)</li> -->
<li><input type="checkbox" checked class="btn btn-default" id="enable-addition"      >Enable Addition</li>
<li><input type="checkbox" checked class="btn btn-default" id="enable-subtraction"   >Enable Subtraction</li>
<li><input type="checkbox" checked class="btn btn-default" id="enable-multiplication">Enable Multiplication</li>
<li><input type="checkbox" checked class="btn btn-default" id="enable-division"      >Enable Division</li>
</ul>
         </div>
        </div>
      </div> <!-- Modal Dialog -->
   </div> <!-- Modal fade -->
<!-- LOGIN MODAL -->
  <div class="modal fade no-print" tabindex="-1" role="dialog" id="loginModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Login</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body">
          <form id="login_form" action="#" method="get">
            <label for="user_name">User Name:</label><br>
            <input name="user_name" id="user_name" size="20"/><br>
            <label for="user_passwd">Password:</label><br>
            <input type="password" name="user_passwd" id="user_passwd" autocomplete='off'  size="20"/><br>
            <p id="psub">
            <input type="submit" value="Log me in!" />
         </form>
        </div>
      </div>
    </div> <!-- Modal Dialog -->
  </div> <!-- Modal fade -->  
  <script type="text/javascript">
      var gameTimer=new StopWatch();
      var myTest=new MathTest(gameTimer);
      
var myOnLoad=function() {
  myTest.setUserName(); // just set null to get default from method
  myTest.tellUserName();
  myTest.tellScore();
  setInterval(function() {
    $('#timer').html("Elapsed time: " + (gameTimer.getElapsed()/1000));
  }, 100);
  $('#settings_useNegativesDiv').click(function() {
    // check if checkbox is checked
    console.log("settings_useNegativesDiv Called");
    if (document.querySelector('#use-negatives').checked) {
      // if checked
      myTest.useNegative=true;
    } else {
      // if unchecked
      myTest.useNegative=false;
    }
  });
  $('#settings_gameMode').on('change', function (e) {
    console.log("settings_gameMode Called");
    var optionSelected = $("option:selected", this);
    var valueSelected = this.value;
    myTest.setGameMode(valueSelected);
  });
  // and start in freeplay mode:
  myTest.setGameMode('mode_freeplay');
  $('#settings_maxValue').on('change', function (e) {
    console.log("settings_useNegativesDiv Called");
    var optionSelected = $("option:selected", this);
    var valueSelected = this.value;
    myTest.maxDigit = parseInt(valueSelected);
  });
  // https://stackoverflow.com/a/12252576/4504607
  $('#login_form').on('submit', function(e) { 
    e.preventDefault();  //prevent form from submitting
    logindata = $("#login_form :input").serializeArray();
    console.log(logindata);
    if( myTest.setUserName(logindata[0].value) ){
      $("#loginModal .close").click(); // click the close gadget, we're done
    }
  });

};
$(document).ready(myOnLoad);
    </script>
  </body>
</html> 